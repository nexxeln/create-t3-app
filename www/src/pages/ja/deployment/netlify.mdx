---
title: Netlify
description: Netlifyへのデプロイ
layout: ../../../layouts/docs.astro
lang: ja
isMdx: true
---

import Callout from "../../../components/docs/callout.tsx";

Netlify is an alternative deployment provider in a similar vein to Vercel. See [`ajcwebdev/ct3a-netlify`](https://github.com/ajcwebdev/ct3a-netlify) for an example repo based on this doc.

Netlify は Vercel と同じような系統、代替となるデプロイメントプロバイダです。このドキュメントに基づいたサンプルリポジトリは [`ajcwebdev/ct3a-netlify`](https://github.com/ajcwebdev/ct3a-netlify) を参照してください。

## Why Host on Netlify

Conventional wisdom says Vercel has superior Next.js support because Vercel develops Next.js. They have a vested interest in ensuring the platform is tuned for optimal performance and DX with Next.js. For the majority of use cases this will be true and it won't make sense to deviate from the standard path.

There's also a common sentiment that many Next.js features are only supported on Vercel. While it's true that new Next.js features will be tested and supported on Vercel at the time of release by default, it's also the case that other providers like Netlify will [quickly implement and release support](https://www.netlify.com/blog/deploy-nextjs-13/) for [stable Next.js features](https://docs.netlify.com/integrations/frameworks/next-js/overview/).

There are relative pros and cons for all deployment providers since no single host can have the best support for all use cases. For example, Netlify built their own [custom Next.js runtime](https://github.com/netlify/next-runtime) for Netlify's Edge Functions (which run on Deno Deploy) and [maintain unique middleware to access and modify HTTP responses](https://github.com/netlify/next-runtime#nextjs-middleware-on-netlify).

## Netlify でホスティングする理由

従来の常識では、Vercel が Next.js のサポートに優れているのは、Vercel が Next.js を開発しているからだと言われています。Vercel は、Next.js で最適なパフォーマンスと DX が得られるようにプラットフォームを調整することに既得権益を持っています。大半のユースケースにおいて、これは真実であり、標準的な道から逸脱することに意味はないでしょう。

また、Next.js の多くの機能は Vercel でしかサポートされないという意見もよくあります。確かに Next.js の新機能はリリース時にデフォルトで Vercel でテストされ、サポートされますが、Netlify など他のプロバイダーが[安定した Next.js 機能](https://docs.netlify.com/integrations/frameworks/next-js/overview/)に対して[迅速に実装してサポートをリリース](https://www.netlify.com/blog/deploy-nextjs-13/)するケースもあります。

すべてのデプロイメント先のプロバイダーには相対的な長所と短所があり、単一のホストがすべてのユースケースに対して最高のサポートを提供できるわけではありません。例えば、Netlify では、Netlify のエッジファンクション（Deno Deploy 上で動作）のために、独自の[カスタム Next.js ランタイム](https://github.com/netlify/next-runtime)を開発し、[HTTP レスポンスにアクセスしたり変更したりするユニークなミドルウェアをメンテナンス](https://github.com/netlify/next-runtime#nextjs-middleware-on-netlify)しています。

<Callout type="info">
  To track the status of non-stable Next 13 features see [Using the Next 13
  `app` directory on
  Netlify](https://github.com/netlify/next-runtime/discussions/1724).
</Callout>

<Callout type="info">
  no-stableのNext 13の機能のステータスを追跡するには、[Next 13の`app`
  ディレクトリをNetlify上で使う](https://github.com/netlify/next-runtime/discussions/1724)を参照してください。
</Callout>

## Project Configuration

There are numerous ways to configure your build instructions including directly through the Netlify CLI or Netlify dashboard. While not required, it is advisable to create and include a [`netlify.toml`](https://docs.netlify.com/configure-builds/file-based-configuration/) file. This ensures forked and cloned versions of the project will be easier to reproducibly deploy.

## プロジェクト構成

Netlify CLI や Netlify ダッシュボードを使って直接ビルド命令を設定するなど、多くの方法があります。必須ではありませんが、[`netlify.toml`](https://docs.netlify.com/configure-builds/file-based-configuration/)ファイルを作成し、インクルードすることをお勧めします。これにより、プロジェクトのフォーク版やクローン版を再現性よくデプロイしやすくなります。

```toml
[build]
  command = "next build"
  publish = ".next"
```

## Using the Netlify Dashboard

1. Push your code to a GitHub repository and sign up for [Netlify](https://app.netlify.com/signup). After you've created an account, click on **Add new site** and then **Import an existing project**.

![New project on Netlify](/images/netlify-01-new-project.webp)

2. Connect your Git provider.

![Import repository](/images/netlify-02-connect-to-git-provider.webp)

3. Select your project's repository.

![Select your project's repository](/images/netlify-03-pick-a-repository-from-github.webp)

4. Netlify will detect if you have a `netlify.toml` file and automatically configure your build command and publish directory.

![Nextjs build settings](/images/netlify-04-configure-build-settings.webp)

5. Click **Show advanced** and then **New variable** to add your environment variables.

![Add environment variables](/images/netlify-05-env-vars.webp)

6. Click **Deploy site**, wait for the build to complete, and view your new site.

## Netlify Dashboard を使う

1. コードを GitHub リポジトリにプッシュし、[Netlify](https://app.netlify.com/signup)にサインアップしてください。アカウントを作成したら、**Add new site** から **Import an existing project** をクリックします。

![Netlify の新プロジェクト](/images/netlify-01-new-project.webp)

2. Git プロバイダーを接続します。

![リポジトリのインポート](/images/netlify-02-connect-to-git-provider.webp)

3. プロジェクトのリポジトリを選択します。

![プロジェクトのリポジトリを選択する](/images/netlify-03-pick-a-repository-from-github.webp)

4. Netlify は `netlify.toml` ファイルがあるかどうかを検出し、ビルドコマンドと公開ディレクトリを自動的に設定します。

![Nextjs のビルド設定](/images/netlify-04-configure-build-settings.webp)

5. 「**Show advanced**」→「**New variable**」をクリックして、環境変数を追加します。

![環境変数の追加](/images/netlify-05-env-vars.webp)

6. 「** Deploy site**」をクリックし、ビルドが完了するのを待ち、新しいサイトを表示します。

## Using the Netlify CLI

To deploy from the command line you must first push your project to a GitHub repo and [install the Netlify CLI](https://docs.netlify.com/cli/get-started/). You can install `netlify-cli` as a project dependency or install it globally on your machine with the following command:

```bash
npm i -g netlify-cli
```

To test your project locally, run the [`ntl dev`](https://docs.netlify.com/cli/get-started/#run-a-local-development-environment) command and open [`localhost:8888`](http://localhost:8888/) to view your locally running Netlify app:

```bash
ntl dev
```

Run the [`ntl init`](https://docs.netlify.com/cli/get-started/#continuous-deployment) command to configure your project:

```bash
ntl init
```

Import your project's environment variables from your `.env` file with [`ntl env:import`](https://cli.netlify.com/commands/env#envimport):

```bash
ntl env:import .env
```

Deploy your project with [`ntl deploy`](https://docs.netlify.com/cli/get-started/#manual-deploys). You'll need to pass the `--build` flag to run the build command before deployment and the `--prod` flag to deploy to your site's main URL:

```bash
ntl deploy --prod --build
```

To view a running example on Netlify, visit [ct3a.netlify.app](https://ct3a.netlify.app/).

## Netlify CLI を使用する

コマンドラインからデプロイするには、まずプロジェクトを GitHub のリポジトリにプッシュし、[Netlify CLI をインストール](https://docs.netlify.com/cli/get-started/) する必要があります。`netlify-cli` はプロジェクトの依存関係としてインストールするか、以下のコマンドであなたのマシンにグローバルにインストールすることができます：

```bash
npm i -g netlify-cli
```

ローカルでプロジェクトをテストするには、[`ntl dev`](https://docs.netlify.com/cli/get-started/#run-a-local-development-environment) コマンドを実行し、[`localhost:8888`](http://localhost:8888/) を開いてローカルで動いている Netlify アプリを表示します：

```bash
ntl dev
```

プロジェクトの設定を行うために、[`ntl init`](https://docs.netlify.com/cli/get-started/#continuous-deployment)コマンドを実行します：

```bash
ntl init
```

プロジェクトの環境変数を `.env` ファイルから [`ntl env:import`](https://cli.netlify.com/commands/env#envimport) でインポートしてください：

```bash
ntl env:import .env
```

プロジェクトをデプロイするには、[`ntl deploy`](https://docs.netlify.com/cli/get-started/#manual-deploys)を使用します。デプロイ前にビルドコマンドを実行するには `--build` フラグを、サイトのメイン URL にデプロイするには `--prod` フラグを渡す必要があります：

```bash
ntl deploy --prod --build
```

Netlify での実行例は、[ct3a.netlify.app](https://ct3a.netlify.app/)でご覧いただけます。
